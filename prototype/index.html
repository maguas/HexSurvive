<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xeno-Hex: Resistance</title>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
    <!-- TOP RESOURCE BAR -->
    <div id="top-bar">
        <div class="top-bar-left">
            <span class="game-title">XENO-HEX</span>
            <span class="vp-display">VP: <span id="vp-count" class="vp-value">0</span>/10</span>
        </div>
        <div id="resource-bar">
            <div class="resource-item" title="Scrap">
                <span class="icon">üî©</span>
                <span id="res-scrap" class="res-value">0</span>
            </div>
            <div class="resource-item" title="Fuel">
                <span class="icon">‚ö°</span>
                <span id="res-fuel" class="res-value">0</span>
            </div>
            <div class="resource-item" title="Food">
                <span class="icon">üçè</span>
                <span id="res-food" class="res-value">0</span>
            </div>
            <div class="resource-item" title="Alloy">
                <span class="icon">üîÆ</span>
                <span id="res-alloy" class="res-value">0</span>
            </div>
            <div class="resource-item" title="Intel">
                <span class="icon">üíæ</span>
                <span id="res-intel" class="res-value">0</span>
            </div>
            <button id="btn-trade" class="trade-btn" title="Trade Resources">üîÑ</button>
        </div>
    </div>

    <div id="game-container">
        <!-- LEFT SIDEBAR: Actions -->
        <aside id="sidebar-left">
            <div class="panel">
                <h2>‚ö° Actions</h2>
                <button id="btn-roll-dice" class="action-btn primary">üé≤ Roll Dice</button>
                <button id="btn-move" class="action-btn">
                    <span class="btn-label">üèÉ Move</span>
                    <span class="btn-cost" data-cost-key="moveHero"></span>
                </button>
                <button id="btn-extract" class="action-btn">
                    <span class="btn-label">‚õèÔ∏è Extract</span>
                    <span class="btn-cost" data-cost-key="extract"></span>
                </button>
                <button id="btn-build-outpost" class="action-btn">
                    <span class="btn-label">üè† Build Outpost</span>
                    <span class="btn-cost" data-cost-key="buildOutpost"></span>
                </button>
                <button id="btn-upgrade-fortress" class="action-btn">
                    <span class="btn-label">üè∞ Upgrade Fortress</span>
                    <span class="btn-cost" data-cost-key="upgradeFortress"></span>
                </button>
                <button id="btn-end-turn" class="action-btn">‚è≠Ô∏è End Turn</button>
            </div>
        </aside>

        <!-- MAIN BOARD AREA -->
        <main id="board-area">
            <canvas id="hex-grid-canvas"></canvas>
            <div id="dice-result" class="overlay-message hidden">
                <div class="dice-display">
                    <span id="die1">‚óè</span>
                    <span id="die2">‚óè</span>
                </div>
                <div id="roll-total">Roll: 7</div>
            </div>

            <!-- Combat Modal -->
            <div id="combat-modal" class="modal hidden">
                <div class="modal-content combat-modal-content">
                    <div class="combat-header">
                        <h2>‚öîÔ∏è COMBAT ENCOUNTER</h2>
                        <div id="encounter-level-badge" class="encounter-level-badge">Level 1</div>
                    </div>
                    
                    <div id="encounter-info" class="encounter-info">
                        <div class="encounter-name">Unknown Enemy</div>
                        <div class="encounter-description">Preparing for combat...</div>
                    </div>

                    <div class="combat-body">
                        <div id="requirements-section" class="requirements-section">
                            <h3>‚ö†Ô∏è Requirements:</h3>
                            <div id="requirements-list" class="requirements-list"></div>
                        </div>
                        <div id="rewards-section" class="rewards-section">
                            <h3>üéÅ Rewards:</h3>
                            <div id="gear-reward" class="gear-reward"></div>
                            <div id="resource-rewards" class="resource-rewards"></div>
                        </div>
                    </div>

                    <div id="combat-phase" class="combat-phase hidden">
                        <h3>üé≤ Your Dice Roll:</h3>
                        <div id="player-dice" class="player-dice"></div>
                        <div id="combat-resolution" class="combat-resolution"></div>
                        <div id="result-actions" class="result-actions"></div>
                    </div>

                    <div id="result-banner" class="result-banner hidden"></div>

                    <div id="initial-actions" class="modal-actions">
                        <button id="btn-fight" class="action-btn primary">‚öîÔ∏è Fight!</button>
                        <button id="btn-retreat" class="action-btn danger">üèÉ Retreat</button>
                    </div>
                </div>
            </div>

            <!-- Encounter Level Selection Modal -->
            <div id="level-select-modal" class="modal hidden">
                <div class="modal-content level-select-content">
                    <h2>‚ö†Ô∏è ENCOUNTER REVEALED</h2>
                    <p>Choose the difficulty level for this encounter:</p>
                    <div class="level-buttons">
                        <button class="level-btn level-1" onclick="selectEncounterLevel(1)">
                            <span class="level-number">1</span>
                            <span class="level-label">Easy</span>
                            <span class="level-vp">+1 VP</span>
                        </button>
                        <button class="level-btn level-2" onclick="selectEncounterLevel(2)">
                            <span class="level-number">2</span>
                            <span class="level-label">Medium</span>
                            <span class="level-vp">+2 VP</span>
                        </button>
                        <button class="level-btn level-3" onclick="selectEncounterLevel(3)">
                            <span class="level-number">3</span>
                            <span class="level-label">Hard</span>
                            <span class="level-vp">+3 VP</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Trade Modal -->
            <div id="trade-modal" class="modal hidden">
                <div class="modal-content trade-modal-content">
                    <h2>üîÑ Trade Resources</h2>
                    <p class="trade-rate">Exchange Rate: 4 ‚Üí 1</p>
                    
                    <div class="trade-section">
                        <label>Give (4):</label>
                        <select id="trade-give">
                            <option value="scrap">üî© Scrap</option>
                            <option value="fuel">‚ö° Fuel</option>
                            <option value="food">üçè Food</option>
                            <option value="alloy">üîÆ Alloy</option>
                            <option value="intel">üíæ Intel</option>
                        </select>
                        <span id="trade-give-available" class="trade-available">(0 available)</span>
                    </div>
                    
                    <div class="trade-arrow">‚¨áÔ∏è</div>
                    
                    <div class="trade-section">
                        <label>Receive (1):</label>
                        <select id="trade-receive">
                            <option value="scrap">üî© Scrap</option>
                            <option value="fuel">‚ö° Fuel</option>
                            <option value="food">üçè Food</option>
                            <option value="alloy">üîÆ Alloy</option>
                            <option value="intel">üíæ Intel</option>
                        </select>
                    </div>
                    
                    <div class="modal-actions">
                        <button id="btn-confirm-trade" class="action-btn primary">Confirm Trade</button>
                        <button id="btn-cancel-trade" class="action-btn">Cancel</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- RIGHT SIDEBAR: Hero & Log -->
        <aside id="sidebar-right">
            <div class="panel">
                <h2>ü¶∏ Commander</h2>
                <div id="hero-card">
                    <div class="hero-name" id="hero-name">Commander</div>
                    <div class="hero-status">
                        <div id="hero-inactive-status" class="status-inactive hidden">
                            ‚è∏Ô∏è Inactive: <span id="inactive-turns">0</span> turn(s)
                        </div>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item stat-tac">
                            <span class="stat-label">Tactics</span>
                            <span id="stat-tac" class="stat-value">0</span>
                        </div>
                        <div class="stat-item stat-str">
                            <span class="stat-label">Strength</span>
                            <span id="stat-str" class="stat-value">0</span>
                        </div>
                        <div class="stat-item stat-tech">
                            <span class="stat-label">Tech</span>
                            <span id="stat-tech" class="stat-value">0</span>
                        </div>
                    </div>
                    <div class="hero-gear">
                        <h3>Equipment</h3>
                        <div class="gear-item">ü¶∫ Suit: <span id="gear-suit">-</span></div>
                        <div class="gear-item">üî´ Weapon: <span id="gear-weapon">-</span></div>
                    </div>
                    <div class="hero-grit">
                        <span class="grit-label">‚ö´ Grit Tokens:</span>
                        <span id="grit-count" class="grit-value">0</span>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h2>üé≤ Turn <span id="turn-counter">1</span></h2>
                <div class="phase-indicator">
                    Phase: <span id="phase-display">Production</span>
                </div>
            </div>

            <div class="panel">
                <h2>üìú Game Log</h2>
                <div id="game-log"></div>
            </div>
        </aside>
    </div>

    <script type="module" src="scripts/main.js"></script>
</body>

</html>